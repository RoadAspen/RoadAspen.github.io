(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{413:function(s,a,n){"use strict";n.r(a);var t=n(24),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"从零打造自己的脚手架"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#从零打造自己的脚手架"}},[s._v("#")]),s._v(" 从零打造自己的脚手架")]),s._v(" "),n("p",[s._v("在前端日新月异的发展中，基于 node 平台，前后端分离，特别是 webpack 出现之后，各种技术如雨后春笋。这也导致了前端工程量的不断膨胀，在如今前端三大框架（react、vue、angular）当道的情况下，开发体验已经和 jquery 一把梭时代完全不同，但是浏览器的版本限制了我们的使用，这就不得不基于 node 搭建可以输出为浏览器支持的静态文件，这种现象导致使用脚手架和不使用脚手架的差别巨大。")]),s._v(" "),n("ol",[n("li",[s._v("不使用脚手架")])]),s._v(" "),n("p",[s._v("当我们从头开始创建一个前端项目，举个 🌰，假设已经安装了 node 程序。")]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("// 创建 my-app文件夹\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" my-app "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" my-app\n\n// "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" 初始化\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" init\n\n// 安装 webpack，并配置webpack\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" webpack-cli -g\n\n// 添加 webpack config 文件\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" webpack.config.js\n\n// 安装react 相关\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" react react-router-dom\n\n// 安装 typescript\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" typescript\n\n// 配置 ts config\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" tsconfig.js\n// 安装各种各样的loader\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v("  css-loader  style-loader babel-loader\n// 还有各种各样的webpack plugin\n\n// 如果使用scss\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" scss scss-loader\n\n// 使用ts\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" ts-loader\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])]),n("p",[s._v("这个流程就非常的麻烦，光想要把项目跑起来就要两到三天的时间。")]),s._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[s._v("当我们从脚手架开始创建一个前端项目，举个 🌰。")])]),s._v(" "),n("div",{staticClass:"language-sh line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[s._v("// 安装 create-react-app 脚手架\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" create-react-app -g\n// 创建项目\ncreate-react-app my-app\n\nmy-app\n├── README.md\n├── node_modules\n├── package.json\n├── .gitignore\n├── public\n│   ├── favicon.ico\n│   ├── index.html\n│   ├── logo192.png\n│   ├── logo512.png\n│   ├── manifest.json\n│   └── robots.txt\n└── src\n    ├── App.css\n    ├── App.js\n    ├── App.test.js\n    ├── index.css\n    ├── index.js\n    ├── logo.svg\n    ├── serviceWorker.js\n    └── setupTests.js\n\n// 进入项目文件\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" my-app\n// 拉依赖 （现在脚手架已经默认拉过依赖了）\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v("\n// 本地启动项目\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" start\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br")])]),n("p",[s._v("在这个过程中， create-react-app 就是一个脚手架，执行 create-react-app my-app，会创建一个 my-app 的文件夹，并在文件夹内部创建预定的文件，create-react-app 还可以加一些参数做一些定制化操作.")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("npx create-react-app my-app --template typescript\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("这个脚手架直接创建了基于 webpack 的 react 工程，包含各种依赖和定制的 typescript 配置，这样极大的方便了我们的开发。\n"),n("strong",[s._v("在我们日常的开发过程中，如果公司的前端工程量很多，即便我们使用官方脚手架创建了项目，那么还是要引入一些相同的依赖，一些公共变量、一些公司内部封装的方法库或者 UI 库，那么就需要把所有工程的共同点抽象出来做成脚手架，这样再创建新的工程的时候就不需要再从头搭建工程了。")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// eg: 在每个项目中的index.html中都需要加入固定版本的js文件，所有的项目都需要设置为相同的eslint规范、一些公共的 d.ts 文件、相同的文件分布、或者统一版本依赖的 React， Redux，统一的UI框架 等等。")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("简单来说， "),n("strong",[s._v("脚手架就是帮助你把项目的基础架子搭好。例如项目依赖、模板、构建工具等等。让你不用从零开始配置一个项目，尽可能快的进行业务开发。")])]),s._v(" "),n("h2",{attrs:{id:"简陋脚手架"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#简陋脚手架"}},[s._v("#")]),s._v(" 简陋脚手架")]),s._v(" "),n("p",[s._v("我觉得脚手架的初衷，就是提供一个最佳实践的基础模板，因此模板拷贝是其核心功能。 我们平时可以基于 create-react-app 创建了一个项目之后，又在上面添加了一堆公司内部的公共包依赖，还有一些公司的代码规范，如果此时我们需要新建一个项目，最方便的就是把这个 项目直接 copy 一份，然后删除一些特定业务逻辑。如果我们把剔除了业务的代码直接做成一个 npm 包，然后创建新项目的时候直接把这个包拉下来，然后放到当前的项目文件夹里，就能迅速出来一个项目框架，直接开始写业务代码。\n脚手架就是干类似于这个事情。")]),s._v(" "),n("h2",{attrs:{id:"脚手架的基本功能"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#脚手架的基本功能"}},[s._v("#")]),s._v(" 脚手架的基本功能")]),s._v(" "),n("p",[s._v("大家熟知的 "),n("code",[s._v("vue-cli")]),s._v(" ,"),n("code",[s._v("create-react-app")]),s._v(", "),n("code",[s._v("@tarojs/cli")]),s._v(" ,"),n("code",[s._v("umi")]),s._v(" 最基本功能：首先提出一些列问题选项，然后为你的新建项目提供一份模板并安装依赖，再提供调试构建命令。")]),s._v(" "),n("p",[s._v("第一个版本的功能我们比较市面上的脚手架的统一流程，比较简单，大致为：")]),s._v(" "),n("ol",[n("li",[s._v("用户输入命令，准备创建项目")]),s._v(" "),n("li",[s._v("脚手架解析用户命令，并弹出交互语句，询问用户创建项目需要哪些功能")]),s._v(" "),n("li",[s._v("用户选择自己需要的功能")]),s._v(" "),n("li",[s._v("脚手架根据用户的选择创建 package.json，并添加对应的依赖")]),s._v(" "),n("li",[s._v("脚手架根据用户的选择渲染项目模版，生成文件（例如 App.js,index.html,main.js）等。")]),s._v(" "),n("li",[s._v("执行 npm install 命令安装依赖。")])]),s._v(" "),n("p",[s._v("项目目录树")]),s._v(" "),n("h3",{attrs:{id:"处理用户命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#处理用户命令"}},[s._v("#")]),s._v(" 处理用户命令")]),s._v(" "),n("p",[s._v("脚手架的第一个功能就是处理用户的命令，这需要使用 "),n("code",[s._v("commander.js")]),s._v(". 这个是用来解析用户命令，提取用户输入的参数给到脚手架。例如：")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code")]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"})])])}),[],!1,null,null,null);a.default=e.exports}}]);